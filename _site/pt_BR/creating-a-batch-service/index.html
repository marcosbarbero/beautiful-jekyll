<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <meta http-equiv="Content-Language" content="pt_BR">
<link rel="alternate" hreflang="en" href=" http://blog.marcosbarbero.com/creating-a-batch-service/"/>
<link rel="alternate" hreflang="pt_BR" href="http://blog.marcosbarbero.com/pt_BR/creating-a-batch-service/"/>


  <title>Criando um serviço batch</title>

  <script>
  </script>

  <meta name="author" content="Marcos Barbero" />

  

  <link rel="alternate" type="application/rss+xml" title="Marcos Barbero's Blog - Eu crio coisas e escrevo sobre isso... às vezes." href="/pt_BR/feed.xml" />

  

  
    
      
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />

    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
      <link rel="stylesheet" href="/css/flags.min.css" />
    
  

  
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="Criando um serviço batch" />
  

   
  <meta property="og:description" content="Esse tutorial te guiará no processo de criação de uma solução de processamento batch. O que você irá criar Você irá construir um serviço que importa os dados de uma planilha CSV, transforma em um objeto java e armazena em um banco de dados SQL. Pré-requisitos JDK 1.8 Editor de...">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="http://blog.marcosbarbero.com/creating-a-batch-service/" />
  <link rel="canonical" href="http://blog.marcosbarbero.com/pt_BR/creating-a-batch-service/" />
  

  
  <meta property="og:image" content="http://blog.marcosbarbero.com/img/avatar.jpeg" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="Criando um serviço batch" />
  

  
  <meta name="twitter:description" content="Esse tutorial te guiará no processo de criação de uma solução de processamento batch. O que você irá criar Você irá construir um serviço que importa os dados de uma planilha CSV, transforma em um objeto java e armazena em um banco de dados SQL. Pré-requisitos JDK 1.8 Editor de...">
  

  
  <meta name="twitter:image" content="http://blog.marcosbarbero.com/img/avatar.jpeg" />
  

  

</head>


  <body>

    
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="http://blog.marcosbarbero.com">Marcos Barbero's Blog</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">

      
        
        
        
        
          
        
      
        
        
          
            
              <li>
                <a href="/pt_BR/about/">Sobre mim</a>
              </li>
            
          
        
      
        
        
      
        
        
          
        
      
        
        
          
        
      
        
        
      


      
        
          <li>
            






<a href="http://blog.marcosbarbero.com">Blog</a>

          </li>
        
        

        
        <li>
          <a href=" /creating-a-batch-service/ ">
            <img src="/img/blank.gif" class="flag  flag-us " />
          </a>
        </li>
        
        <li>
          <a href=" /pt_BR/creating-a-batch-service/ ">
            <img src="/img/blank.gif" class="flag  flag-br " />
          </a>
        </li>
        
      </ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://blog.marcosbarbero.com/pt_BR/">
	      <img class="avatar-img" src="/img/avatar.jpeg" />
		  </a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->




  <div id="header-big-imgs" data-num-img=1
    
	  
	  
	    
		  data-img-src-1="/img/path.jpg"
		
	  
    
  ></div>





<header class="header-section has-img">

<div class="big-img intro-header">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Criando um serviço batch</h1>          

		  
		  
		  
		  <span class="post-meta">Posted on February 10, 2018</span>
		  
        </div>
      </div>
    </div>
  </div>
  <span class='img-desc'></span>
</div>

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Criando um serviço batch</h1>
		  
		  
		  
		  <span class="post-meta">Posted on February 10, 2018</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>




<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      
        
        
        

        <div id="header-gh-btns">
          
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=weekly-drafts&repo=batch-service&type=star&count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=weekly-drafts&repo=batch-service&type=fork&count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=weekly-drafts&type=follow&count=true" frameborder="0" scrolling="0" width="220px" height="20px"></iframe>
              
            
          
        </div>
      

      <article role="main" class="blog-post">
        <p>Esse tutorial te guiará no processo de criação de uma solução de processamento batch.</p>

<h3 id="o-que-você-irá-criar">O que você irá criar</h3>
<p>Você irá construir um serviço que importa os dados de uma planilha CSV, transforma em um objeto java e
armazena em um banco de dados SQL.</p>

<h3 id="pré-requisitos">Pré-requisitos</h3>

<ul>
  <li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 1.8</a></li>
  <li>Editor de texto ou tua IDE favorita.</li>
  <li><a href="https://maven.apache.org/download.cgi">Maven 3.0+</a></li>
</ul>

<h3 id="dados-para-o-processamento">Dados para o processamento</h3>
<p>Para esse tutorial estou usando a seguinte planilha:</p>

<p><code class="highlighter-rouge">src/main/resources/sample-data.csv</code></p>

<pre><code class="language-csv">Optimus Prime,Freightliner FL86 COE Semi-trailer Truck
Sentinel Prime,Cybertronian Fire Truck
Bluestreak,Nissan 280ZX Turbo
Hound,Mitsubishi J59 Military Jeep
Ironhide,Nissan Vanette
Jazz,Martini Racing Porsche 935
Mirage,Ligier JS11 Racer
Prowl,Nissan 280ZX Police Car
Ratchet,Nissan C2 First Response
Sideswipe,Lamborghini Countach LP500-2
Sunstreaker,Supercharged Lamborghini Countach LP500S
Wheeljack,Lancia Stratos Turbo
Hoist,Toyota Hilux Tow Truck
Smokescreen,Nissan S130
Tracks,Chevrolet Corvette C3
Blurr,Cybertronian Hovercar
Hot Rod,Cybertronian Race Car
Kup,Cybertronian Pickup Truck
</code></pre>

<p>Essa planilha contém o nome do <a href="https://ipfs.io/ipfs/QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco/wiki/List_of_Autobots.html">Autobot</a> e o carro em que ele se transforma, separados por vírgula.
Este é um padrão muito comum que o <a href="https://spring.io/">Spring Framework</a> consegue lidar, como você poderá ver.</p>

<p>O próximo passo é escrever um script SQL para armazenar os dados.</p>

<p><code class="highlighter-rouge">src/main/resources/schema-all.sql</code></p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">autobot</span> <span class="n">IF</span> <span class="k">EXISTS</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">autobot</span>  <span class="p">(</span>
    <span class="n">autobot_id</span> <span class="n">BIGINT</span> <span class="k">IDENTITY</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">name</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
    <span class="n">car</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>
</div>

<p class="box-note">Spring Boot executa <code class="highlighter-rouge">schema-@@platform@@.sql</code> automaticamente durante a inicialização. <code class="highlighter-rouge">-all</code> é o padrão para todas as plataformas.</p>

<h3 id="criando-a-classe-de-negócio">Criando a classe de negócio</h3>
<p>Agora que sabemos o formato de entrada e saída, escreveremos uma classe que represente cada linha de dados.</p>

<p><code class="highlighter-rouge">src/main/java/com/marcosbarbero/wd/batch/Autobot</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Autobot</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">car</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Autobot</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">Autobot</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">car</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">car</span> <span class="o">=</span> <span class="n">car</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getCar</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">car</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCar</span><span class="o">(</span><span class="n">String</span> <span class="n">car</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">car</span> <span class="o">=</span> <span class="n">car</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Você pode instanciar a classe <code class="highlighter-rouge">Autobot</code> através do construtor adicionando nome e o carro, ou então usando os setters.</p>

<h3 id="criando-um-processador">Criando um processador</h3>
<p>Um paradigma comum no processamento batch é ingerir os dados, transformá-los, e então armazená-los em algum lugar. Aqui você
escreverá um simples transformador que converte os nomes e carros para maiúsculo.</p>

<p><code class="highlighter-rouge">src/main/java/com/marcosbarbero/wd/batch/AutobotItemProcessor</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">marcosbarbero</span><span class="o">.</span><span class="na">wd</span><span class="o">.</span><span class="na">batch</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.ItemProcessor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AutobotItemProcessor</span> <span class="kd">implements</span> <span class="n">ItemProcessor</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">,</span> <span class="n">Autobot</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">AutobotItemProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Autobot</span> <span class="nf">process</span><span class="o">(</span><span class="n">Autobot</span> <span class="n">autobot</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">String</span> <span class="n">firstName</span> <span class="o">=</span> <span class="n">autobot</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">();</span>
        <span class="kd">final</span> <span class="n">String</span> <span class="n">lastName</span> <span class="o">=</span> <span class="n">autobot</span><span class="o">.</span><span class="na">getCar</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">();</span>

        <span class="kd">final</span> <span class="n">Autobot</span> <span class="n">transformed</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Autobot</span><span class="o">(</span><span class="n">firstName</span><span class="o">,</span> <span class="n">lastName</span><span class="o">);</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Converting ("</span> <span class="o">+</span> <span class="n">autobot</span> <span class="o">+</span> <span class="s">") into ("</span> <span class="o">+</span> <span class="n">transformed</span> <span class="o">+</span> <span class="s">")"</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">transformed</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">AutobotItemProcessor</code> implementa a interface <code class="highlighter-rouge">ItemProcessor</code> do Spring Batch. Isto torna mais fácil ligar o código à um processamento batch que iremos definir mais à frente nesse tutorial. De acordo com a interface, você recebe um objeto do tipo 
<code class="highlighter-rouge">Autobot</code> e depois transforma os dados para maiúsculo retornando novamente um objeto do tipo <code class="highlighter-rouge">Autobot</code>.</p>

<p class="box-note">Não é obrigatório que os objetos de entrada e saída sejam do mesmo tipo. Na verdade, muitas vezes as aplicações necessitam que o objeto de saída seja diferente do de entrada.</p>

<h3 id="criando-o-processamento-batch">Criando o processamento batch</h3>
<p>Spring Batch provê muitas classes utilitárias que reduzem a necessidade de escrever código customizado.
Ao invés disso você pode focar na lógica de negócio</p>

<p><code class="highlighter-rouge">src/main/java/com/marcosbarbero/wd/batch/BatchConfiguration</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">marcosbarbero</span><span class="o">.</span><span class="na">wd</span><span class="o">.</span><span class="na">batch</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.batch.core.Job</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.Step</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.configuration.annotation.EnableBatchProcessing</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.configuration.annotation.JobBuilderFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.configuration.annotation.StepBuilderFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.launch.support.RunIdIncrementer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.database.JdbcBatchItemWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.file.FlatFileItemReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.file.mapping.DefaultLineMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.item.file.transform.DelimitedLineTokenizer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.ClassPathResource</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableBatchProcessing</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchConfiguration</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">JobBuilderFactory</span> <span class="n">jobBuilderFactory</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StepBuilderFactory</span> <span class="n">stepBuilderFactory</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">BatchConfiguration</span><span class="o">(</span><span class="n">JobBuilderFactory</span> <span class="n">jobBuilderFactory</span><span class="o">,</span>
                              <span class="n">StepBuilderFactory</span> <span class="n">stepBuilderFactory</span><span class="o">,</span>
                              <span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">jobBuilderFactory</span> <span class="o">=</span> <span class="n">jobBuilderFactory</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stepBuilderFactory</span> <span class="o">=</span> <span class="n">stepBuilderFactory</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dataSource</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// tag::readerwriterprocessor[]</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">FlatFileItemReader</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="nf">reader</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">FlatFileItemReader</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FlatFileItemReader</span><span class="o">&lt;&gt;();</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">setResource</span><span class="o">(</span><span class="k">new</span> <span class="n">ClassPathResource</span><span class="o">(</span><span class="s">"sample-data.csv"</span><span class="o">));</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">setLineMapper</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultLineMapper</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="o">{</span> 
                <span class="n">setLineTokenizer</span><span class="o">(</span><span class="k">new</span> <span class="n">DelimitedLineTokenizer</span><span class="o">()</span> <span class="o">{</span>
                    <span class="o">{</span> <span class="n">setNames</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"car"</span><span class="o">});</span> <span class="o">}</span>
                <span class="o">});</span>
                <span class="n">setFieldSetMapper</span><span class="o">(</span><span class="k">new</span> <span class="n">BeanWrapperFieldSetMapper</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;()</span> <span class="o">{</span>
                    <span class="o">{</span> <span class="n">setTargetType</span><span class="o">(</span><span class="n">Autobot</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">reader</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AutobotItemProcessor</span> <span class="nf">processor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AutobotItemProcessor</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">JdbcBatchItemWriter</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="nf">writer</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">JdbcBatchItemWriter</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JdbcBatchItemWriter</span><span class="o">&lt;&gt;();</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">setItemSqlParameterSourceProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">BeanPropertyItemSqlParameterSourceProvider</span><span class="o">&lt;&gt;());</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">setSql</span><span class="o">(</span><span class="s">"INSERT INTO autobot (name, car) VALUES (:name, :car)"</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dataSource</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">writer</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// end::readerwriterprocessor[]</span>

    <span class="c1">// tag::jobstep[]</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">Job</span> <span class="nf">importAutobotJob</span><span class="o">(</span><span class="n">JobCompletionNotificationListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">jobBuilderFactory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"importAutobotJob"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">incrementer</span><span class="o">(</span><span class="k">new</span> <span class="n">RunIdIncrementer</span><span class="o">())</span>
                <span class="o">.</span><span class="na">listener</span><span class="o">(</span><span class="n">listener</span><span class="o">)</span>
                <span class="o">.</span><span class="na">flow</span><span class="o">(</span><span class="n">step1</span><span class="o">())</span>
                <span class="o">.</span><span class="na">end</span><span class="o">()</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">Step</span> <span class="nf">step1</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">stepBuilderFactory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"step1"</span><span class="o">)</span>
                <span class="o">.&lt;</span><span class="n">Autobot</span><span class="o">,</span> <span class="n">Autobot</span><span class="o">&gt;</span><span class="n">chunk</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
                <span class="o">.</span><span class="na">reader</span><span class="o">(</span><span class="n">reader</span><span class="o">())</span>
                <span class="o">.</span><span class="na">processor</span><span class="o">(</span><span class="n">processor</span><span class="o">())</span>
                <span class="o">.</span><span class="na">writer</span><span class="o">(</span><span class="n">writer</span><span class="o">())</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="c1">// end::jobstep[]</span>
<span class="o">}</span>
</code></pre>
</div>

<p class="box-note">A anotação <code class="highlighter-rouge">@EnableBatchProcessing</code> adiciona vários beans críticos para suportar a criação dos <code class="highlighter-rouge">batch jobs</code> e te ajuda a não 
escrever muitas linhas de código. Esse examplo usa um banco de dados em memória, isso quer dizer que quando o processo termina
os dados se perdem.</p>

<p>Passo a passo:</p>

<p><code class="highlighter-rouge">src/main/java/com/marcosbarbero/wd/batch/BatchConfiguration</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">FlatFileItemReader</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="nf">reader</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">FlatFileItemReader</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FlatFileItemReader</span><span class="o">&lt;&gt;();</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">setResource</span><span class="o">(</span><span class="k">new</span> <span class="n">ClassPathResource</span><span class="o">(</span><span class="s">"sample-data.csv"</span><span class="o">));</span>
        <span class="n">reader</span><span class="o">.</span><span class="na">setLineMapper</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultLineMapper</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="o">{</span>
            <span class="n">setLineTokenizer</span><span class="o">(</span><span class="k">new</span> <span class="n">DelimitedLineTokenizer</span><span class="o">()</span> <span class="o">{</span>
                <span class="o">{</span>
                <span class="n">setNames</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"car"</span><span class="o">});</span>
                <span class="o">}</span>
            <span class="o">});</span>
            <span class="n">setFieldSetMapper</span><span class="o">(</span><span class="k">new</span> <span class="n">BeanWrapperFieldSetMapper</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;()</span> <span class="o">{</span>
                <span class="o">{</span>
                <span class="n">setTargetType</span><span class="o">(</span><span class="n">Autobot</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="k">return</span> <span class="n">reader</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AutobotItemProcessor</span> <span class="nf">processor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AutobotItemProcessor</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">JdbcBatchItemWriter</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="nf">writer</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">JdbcBatchItemWriter</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JdbcBatchItemWriter</span><span class="o">&lt;&gt;();</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">setItemSqlParameterSourceProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">BeanPropertyItemSqlParameterSourceProvider</span><span class="o">&lt;&gt;());</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">setSql</span><span class="o">(</span><span class="s">"INSERT INTO autobot (name, car) VALUES (:name, :car)"</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dataSource</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">writer</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre>
</div>

<p>A primeira parte do código define a entrada, processamento e saída. - <code class="highlighter-rouge">reader()</code> cria um <code class="highlighter-rouge">ItemReader</code>. Ele procura por um
arquivo chamado <code class="highlighter-rouge">sample-data.csv</code> e converte cada linha em um <code class="highlighter-rouge">Autobot</code> - <code class="highlighter-rouge">processor()</code> cria uma instancia do nosso 
<code class="highlighter-rouge">AutobotItemProcessor</code> que foi definido anteriormente, para transformar os dados para maiúsculo. - <code class="highlighter-rouge">write(DataSource)</code> cria
um <code class="highlighter-rouge">ItemWriter</code>. Esse tem como foco a inserção de dados JDBC.</p>

<p><code class="highlighter-rouge">src/main/java/com/marcosbarbero/wd/batch/BatchConfiguration</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">Job</span> <span class="nf">importAutobotJob</span><span class="o">(</span><span class="n">JobCompletionNotificationListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">jobBuilderFactory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"importAutobotJob"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">incrementer</span><span class="o">(</span><span class="k">new</span> <span class="n">RunIdIncrementer</span><span class="o">())</span>
                <span class="o">.</span><span class="na">listener</span><span class="o">(</span><span class="n">listener</span><span class="o">)</span>
                <span class="o">.</span><span class="na">flow</span><span class="o">(</span><span class="n">step1</span><span class="o">())</span>
                <span class="o">.</span><span class="na">end</span><span class="o">()</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">Step</span> <span class="nf">step1</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">stepBuilderFactory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"step1"</span><span class="o">)</span>
                <span class="o">.&lt;</span><span class="n">Autobot</span><span class="o">,</span> <span class="n">Autobot</span><span class="o">&gt;</span><span class="n">chunk</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
                <span class="o">.</span><span class="na">reader</span><span class="o">(</span><span class="n">reader</span><span class="o">())</span>
                <span class="o">.</span><span class="na">processor</span><span class="o">(</span><span class="n">processor</span><span class="o">())</span>
                <span class="o">.</span><span class="na">writer</span><span class="o">(</span><span class="n">writer</span><span class="o">())</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre>
</div>

<p>O primeiro método define um processo (job) e o segundo define um passo (step). Processos são construídos à partir de passos,
onde cada passo envolve um <code class="highlighter-rouge">reader</code>, <code class="highlighter-rouge">processor</code> e um <code class="highlighter-rouge">writer</code>.</p>

<p>Na definição desse processo, você precisa de um <code class="highlighter-rouge">incrementer</code> porque <code class="highlighter-rouge">processos</code> usam um banco de dados para manter o estado
de execução. Você então lista cada passo, esse processo tem apenas um passo. O processo termina, e a API Java produz um 
processo perfeitamente configurado.</p>

<p>Na definição do passo (step), você definite quantos dados quer escrever ao mesmo tempo. Nesse caso, a aplicação escreve até 10 registros ao mesmo tempo. Depois você configura o <code class="highlighter-rouge">reader</code>, <code class="highlighter-rouge">processor</code> e <code class="highlighter-rouge">writer</code> injetando os métodos definidos mais cedo 
nesse tutorial.</p>

<p class="box-note"><code class="highlighter-rouge">chunk()</code> está prefixado &lt;Autobot, Autobot&gt;  porque ele é um método genérico. Ele representa os tipos de entrada e saída de
cada “chunk” de processamento, e se alinha com <code class="highlighter-rouge">ItemReader&lt;Autobot&gt;</code> e <code class="highlighter-rouge">ItemWriter&lt;Autobot&gt;</code>.</p>

<p><code class="highlighter-rouge">src/main/java/com/marcosbarbero/wd/batch/JobCompletionNotificationListener</code></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">marcosbarbero</span><span class="o">.</span><span class="na">wd</span><span class="o">.</span><span class="na">batch</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.BatchStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.JobExecution</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.batch.core.listener.JobExecutionListenerSupport</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.JdbcTemplate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JobCompletionNotificationListener</span> <span class="kd">extends</span> <span class="n">JobExecutionListenerSupport</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">JobCompletionNotificationListener</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">JobCompletionNotificationListener</span><span class="o">(</span><span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">jdbcTemplate</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterJob</span><span class="o">(</span><span class="n">JobExecution</span> <span class="n">jobExecution</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">jobExecution</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()</span> <span class="o">==</span> <span class="n">BatchStatus</span><span class="o">.</span><span class="na">COMPLETED</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"!!! JOB FINISHED! Time to verify the results"</span><span class="o">);</span>

            <span class="n">List</span><span class="o">&lt;</span><span class="n">Autobot</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="s">"SELECT name, car FROM autobot"</span><span class="o">,</span>
                    <span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">row</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">Autobot</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">)));</span>

            <span class="k">for</span> <span class="o">(</span><span class="n">Autobot</span> <span class="n">autobot</span> <span class="o">:</span> <span class="n">results</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Found &lt;"</span> <span class="o">+</span> <span class="n">autobot</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&gt; in the database."</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Esse código executa quando o processamento está com o status <code class="highlighter-rouge">BatchStatus.COMPLETED</code>, e então usa o <code class="highlighter-rouge">JdbcTemplate</code> para
verificar os resultados.</p>

<h3 id="executando">Executando</h3>
<p>Esse projeto foi construído usando <a href="https://projects.spring.io/spring-boot/">Spring Boot</a>, para executá-lo basta compilar o
código com o seguinte comando:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./mvnw clean package
</code></pre>
</div>

<p>E então executá-lo com o seguinte comando:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>java -jar target/batch-service-0.0.1-SNAPSHOT.jar
</code></pre>
</div>

<p>O processo imprime uma linha para cada autobot que é transformado. Depois que o processo termina você também pode ver a saída
a partir da busca ao banco de dados.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Optimus Prime'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Freightliner FL86 COE Semi-trailer Truck'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'OPTIMUS PRIME'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'FREIGHTLINER FL86 COE SEMI-TRAILER TRUCK'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Sentinel Prime'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Cybertronian Fire Truck'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'SENTINEL PRIME'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'CYBERTRONIAN FIRE TRUCK'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Bluestreak'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Nissan 280ZX Turbo'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'BLUESTREAK'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'NISSAN 280ZX TURBO'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Hound'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Mitsubishi J59 Military Jeep'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'HOUND'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'MITSUBISHI J59 MILITARY JEEP'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Ironhide'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Nissan Vanette'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'IRONHIDE'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'NISSAN VANETTE'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Jazz'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Martini Racing Porsche 935'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'JAZZ'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'MARTINI RACING PORSCHE 935'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Wheeljack'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Lancia Stratos Turbo'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'WHEELJACK'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'LANCIA STRATOS TURBO'</span><span class="o">})</span>
Converting <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'Hoist'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'Toyota Hilux Tow Truck'</span><span class="o">})</span> into <span class="o">(</span>Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'HOIST'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'TOYOTA HILUX TOW TRUCK'</span><span class="o">})</span>

Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'OPTIMUS PRIME'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'FREIGHTLINER FL86 COE SEMI-TRAILER TRUCK'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'SENTINEL PRIME'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'CYBERTRONIAN FIRE TRUCK'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'BLUESTREAK'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'NISSAN 280ZX TURBO'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'HOUND'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'MITSUBISHI J59 MILITARY JEEP'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'IRONHIDE'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'NISSAN VANETTE'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'JAZZ'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'MARTINI RACING PORSCHE 935'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'MIRAGE'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'LIGIER JS11 RACER'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
Found &lt;Autobot<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s1">'PROWL'</span>, <span class="nv">car</span><span class="o">=</span><span class="s1">'NISSAN 280ZX POLICE CAR'</span><span class="o">}</span>&gt; <span class="k">in </span>the database.
</code></pre>
</div>

<p class="box-note">Os dados acima estão divergentes entre <code class="highlighter-rouge">entrada</code> e <code class="highlighter-rouge">saída</code> porque eu removi alguns dados para facilitar a leitura.</p>

<h3 id="sumário">Sumário</h3>
<p>Parabéns! Você acabou de construir um processo batch que lê dados de uma planilha, processa e escreve no banco de dados.</p>

<h4 id="nota-de-rodapé">Nota de rodapé</h4>
<ul>
  <li>Esse tutorial foi criado baseando-se no seguinte link: <a href="https://spring.io/guides/gs/batch-processing/">Creating a Batch Service</a></li>
  <li>O código desse tutorial está disponível no <a href="https://github.com/weekly-drafts/batch-service">github</a></li>
</ul>

      </article>

      
        <div class="blog-tags">
          Tags:
          
          
            <a href="/tags#spring">spring</a>
          
            <a href="/tags#spring-framework">spring-framework</a>
          
            <a href="/tags#spring-boot">spring-boot</a>
          
            <a href="/tags#spring-batch">spring-batch</a>
          
            <a href="/tags#batch">batch</a>
          
            <a href="/tags#java">java</a>
          
          
        </div>
      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
  <!--- Share on Twitter -->
    <a href="https://twitter.com/intent/tweet?text=Criando+um+servi%C3%A7o+batch+http://blog.marcosbarbero.com/creating-a-batch-service/"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fa fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
  <!--- Share on Facebook -->
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.marcosbarbero.com/creating-a-batch-service/"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fa fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
  <!--- Share on Google Plus -->
    <a href="https://plus.google.com/share?url=http://blog.marcosbarbero.com/creating-a-batch-service/"
      class="btn btn-social-icon btn-google" title="Share on Google+">
      <span class="fa fa-fw fa-google-plus" aria-hidden="true"></span>
      <span class="sr-only">Google+</span>
    </a>
  

  
  <!--- Share on LinkedIn -->
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://blog.marcosbarbero.com/creating-a-batch-service/"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fa fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

</section>



      

      <ul class="pager blog-pager">
        
        
      </ul>

      
        <div class="disqus-comments">
          <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'marcosbarbero';
        /* ensure that pages with query string get the same discussion */
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        </div>
      
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/pt_BR/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:marcos.hgb@gmail.com" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li><li><a href="https://github.com/marcosbarbero" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://twitter.com/marcosbarbero_" title="Twitter"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Twitter</span>
              </a>
            </li><li><a href="https://plus.google.com/+MarcosBarbero" title="Google+"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Google+</span>
              </a>
            </li><li><a href="https://linkedin.com/in/marcosbarbero" title="LinkedIn"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Marcos Barbero
      &nbsp;&bull;&nbsp;
      2018

      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.marcosbarbero.com/pt_BR/">blog.marcosbarbero.com</a>
      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  



	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-54888300-2', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


  
  </body>
</html>
